<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>YouTube to MP4 Converter</title>
    <link rel="stylesheet" href="../static/css/Gtuber.css">
</head>
<body>

    <header>
        <div class="logo">
            <img src="../static/images/Tuber.png" alt="Gtuber">
        </div>
        <div class="para">
            <marquee width="60%" height="50%">
                Hello Everyone! Welcome to my website. I'm a passionate web developer with a strong background in creating
                innovative and user-friendly web solutions. As a freelancer, I offer a range of services to meet your needs,
                from website design to development and beyond. Feel free to explore my portfolio to see examples of my work.
                If you have any questions or need assistance with a project, don't hesitate to reach out. I'm here to help!
                For inquiries, contact me at: 949-149-6815
            </marquee>
        </div>
        <nav>
            <a href="#">Home</a>
            <a href="#">YouTube to MP4</a>
        </nav>
    </header>

    <main>
        <section class="converter-section">
            <h2>YouTube to MP4</h2>
            <div class="input-container">
                <input type="text" id="youtubeUrl" placeholder="Paste YouTube URL Here..." required>
                <button id="downloadBtn">Download</button>
            </div>

            <div class="instructions">
                <h3>How to Download YouTube Video</h3>
                <ol>
                    <li>Please enter the link into the search box, then press the "Download" button.</li>
                    <li>When you click the "Download" button, the download will start automatically.</li>
                </ol>
            </div>

            <div class="features">
                <h3>Key Features</h3>
                <ul>
                    <li>Free and Unlimited downloads</li>
                    <li>High video resolution up to 8k</li>
                    <li>Supported video quality: 144p, 244p, 360p, 480p, 720p, 1080p, 1440p, and 2160p</li>
                </ul>
            </div>
        </section>

        <section class="converter-info">
            <h3>Best YouTube to MP4 Downloader</h3>
            <p>Our GTuber video Downloader helps to download YouTube videos using a YouTube link.</p>
        </section>
    </main>

    <footer>
        <p>Terms of use | Privacy Policy | Contact Us:9491496815</p>
        <p>Copyright Â© 2024 Gtuber.media</p>
    </footer>

    <script>
        // Event listener for the download button
        document.getElementById('downloadBtn').addEventListener('click', async () => {
    const youtubeUrl = document.getElementById('youtubeUrl').value;

    // Basic validation for URL
    if (!youtubeUrl) {
        alert("Please enter a YouTube URL.");
        return;
    }

    try {
        // Create FormData to send the URL
        const formData = new FormData();
        formData.append('link', youtubeUrl);

        // Sending the YouTube URL to the FastAPI backend
        const response = await fetch('https://gtuber-9aag.onrender.com', {
            method: 'POST',
            body: formData,
        });

        const result = await response.json();
        
        if (response.ok && result.status === 'success') {
            // Trigger the download (replace with actual download URL from backend)
            alert('Your video is ready to download!');
            window.location.href = result.download_url; // assuming your backend sends a download link
        } else {
            alert('Failed to process the YouTube link.');
        }
    } catch (error) {
        console.error('Error:', error);
        alert('An error occurred while processing the YouTube link.');
    }
});

    </script>

</body>
</html>
